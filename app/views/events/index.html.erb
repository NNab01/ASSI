
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

<style>

header {
  background-color: #333;
  color: #fff;
  height:100px;
  font-size: 20px;
  display: flex;
  align-items: center; /* Centra verticalmente */
  justify-content: center;
}

#filter {
  text-align: right;
  margin-bottom: 20px;
}


#events-carousel {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  padding: 20px;
}

.event-card {
  width: 300px;
  margin-bottom: 20px;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
}


.event-card .save-button {
  float: right;
  color: #f0f;
}

.card {
  background-color: #f1f1f1;
  border-radius: 5px;
  padding: 10px;
  margin-bottom: 10px;
  position : relative
}

.card h2 {
  font-size: 18px;
  margin-bottom: 5px;
}

.card p {
  font-size: 14px;
  margin-bottom: 3px;
  color:black;
}

#footer{
  position:fixed;
  bottom: 20px;
  left:0;
  width:100%;
  text-align: center 

}
.fas{
  margin-right: 8px;
  color:black

}
.fas:hover{
  transform: scale(1.3);
  color: grey;
  cursor:pointer

}
.saved .fas{
  color:red;
}
</style>

<header>
            <div class="title-container">
                <h3>EventMaster</h3>
            </div>
        </header>
<% if flash[:success] %>
  <div class="success-message">
    <%= flash[:success] %>
  </div>
<% end %>
<div id="filter">
      <button id="price-filter">Filtro Prezzo</button>
      <button id="rating-filter">Filtro Valutazione</button>
      <button id="nearby-filter">Filtro Vicinanza</button>
    </div>
<div class="events">

 <% @events.each do |event| %>
    <%= link_to event_path(event) do %>
      <div class="card">
        <h2><%= event.title %></h2>
        <p>Presales left: <%= event.presales_left %></p>
        <p>Price: <%= event.price %></p>
        <p>Date: <%= event.date %></p>
        <p>Location: <%= event.location %></p>
        <div class="save-button" , style= "position: absolute; top: 10px; right: 10px;">
        <% if event.saved_by?(current_user) %>
        <%user = User.find(current_user.id)%>
        <%evento = Event.find(event.id)%>
        <%saved_events_ids = Save.where(event_id: evento.id , user_id: user.id).pluck(:id).first%>
        <%= link_to delete_saves_path(user_id: current_user.id,event_id: saved_events_ids),method: :delete, class: 'save-button saved' do %>
        <i class="fas fa-star"></i>        
        <% end %>
        <% else %>
        <%= link_to user_saves_path(user_id: current_user.id,event_id: event.id),method: :post, class: 'save-button' do %>
        <i class="fas fa-star"></i>        
        <% end %>
        <% end %>
        </div>
        </div>
        <% end %>
        <% end %>

</div>

<div id="footer" >

  <!-- Icona "Home" -->
  <%= link_to events_path do %>
    <i class="fas fa-home fa-2x"></i>
<% end %>

  <!-- Icona "Add" -->
<% if can?(:create, Event) %>
  <%= link_to new_event_path do %>
    <i class="fas fa-plus fa-2x"></i>
  <% end %>
<% end %>

<!-- Icona "Salva" -->
<%= link_to user_saves_path(user_id: current_user.id) do %>
    <i class="fas fa-save fa-2x"></i>
<% end %>  
  <!-- Icona "Utente" -->
<%= link_to user_path(current_user) do %>
    <i class="fas fa-user fa-2x"></i>
<% end %> 
	  </div>
